version: '2'

services:
  puppetmaster:
    hostname: puppetmaster.local
    build: puppetmaster-image
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
      - ./root:/root
      - ./environments:/etc/puppetlabs/code/environments
    networks:
      - lan
    ports:
      - 8140:8140
  puppetagent:
    hostname: puppetagent.local
    build: puppetagent-image
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
    networks:
      - lan

networks:
  lan:
